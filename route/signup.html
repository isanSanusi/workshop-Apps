<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Signup - Prototype</title>
      <link rel="stylesheet" href="../style/loginStyle.css" />
   </head>
   <body>
      <div class="login-container">
         <h2>Daftarkan Akun Baru</h2>
         <form id="signupForm">
            <div class="input-group">
               <label for="username">Username</label>
               <input type="text" id="username" required />
            </div>
            <div class="input-group">
               <label for="password">Password</label>
               <input type="password" id="password" required />
            </div>
            <div class="input-group">
               <label for="role">Role</label>
               <select id="role" required>
                  <option value="admin">admin</option>
                  <option value="lapangan">lapangan</option>
               </select>
            </div>
            <button type="submit">Daftar</button>
            <p class="back-link">
               <a href="./admin.html">⬅️ Kembali ke Admin</a>
            </p>
         </form>
      </div>

      <script>
         document
            .getElementById("signupForm")
            .addEventListener("submit", function (e) {
               e.preventDefault();

               const username = document
                  .getElementById("username")
                  .value.trim();
               const password = document
                  .getElementById("password")
                  .value.trim();
               const role = document.getElementById("role").value;

               if (!username || !password) {
                  alert("Username dan Password harus diisi!");
                  return;
               }

               // Ambil data user yang sudah ada
               let users = JSON.parse(localStorage.getItem("users")) || [];

               // Cek apakah username sudah dipakai
               if (users.some((u) => u.username === username)) {
                  alert("Username sudah digunakan!");
                  return;
               }

               // Simpan user baru
               users.push({
                  username,
                  password,
                  role,
               });

               localStorage.setItem("users", JSON.stringify(users));
               alert("User berhasil didaftarkan!");
               window.location.href = "./admin.html";
            });
      </script>
   </body>
</html>
